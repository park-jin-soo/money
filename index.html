<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±„ìš°ë¯¸ ë¸”ë¡œê·¸ ì»¬ë ‰ì…˜ ì„œë¹„ìŠ¤ ì‹ ì²­ í•˜ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #f1f5f9; }
        .hidden { display: none; }
        .program-card { font-size: 0.7rem; padding: 4px 8px; border-radius: 6px; background: #ffffff; border: 1px solid #e2e8f0; color: #64748b; text-align: center; }
        select { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 1rem; }
    </style>
</head>
<body class="py-12 px-4">

    <div id="selection-page" class="max-w-7xl mx-auto">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-black text-gray-900 mb-3 tracking-tight">ğŸ’ ì±„ìš°ë¯¸ ë¸”ë¡œê·¸ ì»¬ë ‰ì…˜ ì„œë¹„ìŠ¤ ì‹ ì²­ í•˜ê¸°</h1>
            <p class="text-gray-500 text-lg font-medium">ì‚¬ìš©í•  ê³„ì • ìˆ˜ëŸ‰ì— ë§ì¶° ì˜µì…˜ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
        </header>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            <div class="bg-white rounded-[2rem] shadow-sm p-8 border border-gray-100 flex flex-col transition-all hover:shadow-md">
                <div class="mb-5 text-center">
                    <span class="text-[10px] font-black text-blue-500 bg-blue-50 px-2 py-1 rounded uppercase tracking-widest">Shopping Connect</span>
                    <h2 class="text-2xl font-bold text-gray-800 mt-2">ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ì¼ë°˜í˜•</h2>
                    <p class="text-xl font-bold text-gray-900 mt-1">20,000ì› <span class="text-xs text-gray-400 font-normal">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-3 mb-8 flex-grow border-t pt-4">
                    <li>âœ… ì‡¼í•‘ì»¤ë„¥íŠ¸ ì›ê³  ìë™ ìƒì„±</li>
                    <li>âœ… ì›ê³  ì„ì‹œì €ì¥ ë° ê´€ë¦¬</li>
                    <li>âœ… ë¸”ë¡œê·¸ ì¦‰ì‹œ ë°œí–‰</li>
                </ul>
                <div class="mt-4 mb-4 px-4 py-3 bg-red-50 border border-red-200 rounded-xl text-center">
                    <p class="text-[11px] text-red-600 font-semibold leading-relaxed">
                        ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨ì€<br>í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </p>
                </div>
                <div class="mt-auto bg-slate-50 p-4 rounded-2xl border border-slate-100 text-center">
                    <label class="block text-[11px] font-bold text-gray-400 mb-2 leading-tight italic">ì‚¬ìš©í•  ê³„ì •ìˆ˜ëŸ‰ì— ë§ì¶° ì„ íƒí•˜ì„¸ìš”</label>
                    <select id="qty_basic" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-slate-200 rounded-xl p-2.5 outline-none cursor-pointer focus:ring-2 focus:ring-blue-500">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}">${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-[2rem] shadow-xl p-8 border-2 border-blue-500 flex flex-col relative transform lg:scale-105 z-10">
                <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full text-[11px] font-black shadow-lg">ì¶”ì²œìƒí’ˆ</div>
                <div class="mb-5 text-center">
                    <span class="text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-1 rounded uppercase tracking-widest">Shopping Connect</span>
                    <h2 class="text-2xl font-bold text-gray-800 mt-2">ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ê³ ê¸‰í˜•</h2>
                    <p class="text-xl font-bold text-gray-900 mt-1">30,000ì› <span class="text-xs text-gray-400 font-normal">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-3 mb-8 flex-grow border-t pt-4">
                    <li class="font-bold text-blue-600">â­ ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ì¼ë°˜í˜• ëª¨ë“  ê¸°ëŠ¥ í¬í•¨</li>
                    <li class="font-bold text-indigo-600">âœ… ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨ í¬í•¨</li>
                </ul>
                <div class="mt-4 mb-4 px-4 py-3 bg-blue-50 border border-blue-200 rounded-xl text-center">
                    <p class="text-[11px] text-blue-600 font-semibold leading-relaxed">
                        ì˜¬ì¸ì›ì€<br>í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </p>
                </div>
                <div class="mt-auto bg-blue-50 p-4 rounded-2xl border border-blue-100 text-center">
                    <label class="block text-[11px] font-bold text-blue-400 mb-2 leading-tight italic">ì‚¬ìš©í•  ê³„ì •ìˆ˜ëŸ‰ì— ë§ì¶° ì„ íƒí•˜ì„¸ìš”</label>
                    <select id="qty_premium" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-blue-200 rounded-xl p-2.5 outline-none cursor-pointer focus:ring-2 focus:ring-blue-500">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}" ${i===1?'selected':''}>${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-[2rem] shadow-sm p-8 border border-gray-200 flex flex-col transition-all hover:shadow-md">
                <div class="mb-5 text-center">
                    <span class="text-[10px] font-black text-indigo-500 bg-indigo-50 px-2 py-1 rounded uppercase tracking-widest">Post Booster</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨</h2>
                    <p class="text-sm text-indigo-600 font-semibold mt-1 mb-2">ìŠ¤í¬ë© / ëŒ“ê¸€ / ê³µê° / ì²´ë¥˜</p>
                    <p class="text-xl font-bold text-gray-900 mt-1">20,000ì› <span class="text-xs text-gray-400 font-normal">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-2 mb-8 flex-grow border-t pt-4">
                    <li class="text-[11px] text-indigo-600 font-bold bg-indigo-50 p-2 rounded mb-2 text-center">30ë¶„ ë‚´ ìŠ¤í¬ë© / ëŒ“ê¸€ / ê³µê° / ì²´ë¥˜ ì§€ì›</li>
                    <li>ğŸš€ ë°œí–‰ ìë™ ê°ì§€ ë° ì¦‰ì‹œ ì§€ì›</li>
                    <li>ğŸ’¬ ê³ í€„ë¦¬í‹° ëŒ“ê¸€ & ê³µê°</li>
                </ul>
                <div class="mt-auto bg-indigo-50 p-4 rounded-2xl border border-indigo-100 text-center">
                    <label class="block text-[11px] font-bold text-indigo-400 mb-2 leading-tight italic">ì‚¬ìš©í•  ê³„ì •ìˆ˜ëŸ‰ì— ë§ì¶° ì„ íƒí•˜ì„¸ìš”</label>
                    <select id="qty_sdg" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-indigo-200 rounded-xl p-2.5 outline-none cursor-pointer focus:ring-2 focus:ring-indigo-500">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}">${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-[2rem] shadow-sm p-8 border border-gray-200 flex flex-col transition-all hover:shadow-md">
                <div class="mb-4 text-center">
                    <span class="text-[10px] font-black text-purple-500 bg-purple-50 px-2 py-1 rounded uppercase tracking-widest">Utility Pack</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ì˜¬ì¸ì› ì›” êµ¬ë…</h2>
                    <p class="text-xl font-bold text-purple-600 mt-1">10,000ì›</p>
                </div>
                <div class="grid grid-cols-2 gap-1.5 mb-4 border-t pt-4">
                    <div class="program-card">ì‹œë‹ˆì–´ê³µê°</div><div class="program-card">ì²´í—˜ë‹¨ë§›ì§‘</div>
                    <div class="program-card">íŠ¸ë Œë“œí‚¤ì›Œë“œ</div><div class="program-card">ì´ì¼€ì•„ì „ìš©</div>
                    <div class="program-card">ìŠ¤í¬ì¸ ë‰´ìŠ¤</div><div class="program-card">ì±„ìš°ë¯¸ì—°ì˜ˆ</div>
                    <div class="program-card col-span-2 text-[10px] bg-slate-50 border-dashed border-slate-200">ì§€ì‹ì¸ / í—¤ì–´ / ë‹¤ì´ì†Œ ë“±</div>
                </div>
                <div class="mb-4 px-4 py-3 bg-purple-50 border border-purple-200 rounded-xl text-center">
                    <p class="text-[11px] text-purple-600 font-semibold leading-relaxed">
                        ì˜¬ì¸ì› ë§ˆí¬ ìˆëŠ” í”„ë¡œê·¸ë¨ì€<br>êµ¬ë…ê¸°ê°„ ì „ì²´ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.
                    </p>
                </div>
                <div class="mt-auto bg-purple-50 p-4 rounded-xl flex items-center justify-between border border-purple-100">
                    <span class="text-xs font-bold text-purple-700">ë‹¨ë… êµ¬ë…í•˜ê¸°</span>
                    <input type="checkbox" id="check_allinone" onchange="calculate()" class="w-6 h-6 rounded border-purple-300 text-purple-600 cursor-pointer focus:ring-purple-500">
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto bg-slate-900 rounded-[2.5rem] p-10 shadow-2xl text-white">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="text-center md:text-left">
                    <p class="text-slate-400 text-sm font-semibold mb-1 uppercase tracking-widest">Final Total</p>
                    <div class="flex items-baseline justify-center md:justify-start">
                        <span class="text-6xl font-black text-white" id="display_total">30,000</span><span class="text-2xl font-bold ml-2 text-slate-300">ì›</span>
                    </div>
                </div>
                <button onclick="goToPayment()" class="w-full md:w-auto bg-blue-500 hover:bg-blue-600 text-white py-6 px-16 rounded-2xl font-black text-xl transition-all shadow-xl active:scale-95 shadow-blue-500/20">êµ¬ë§¤ ì‹ ì²­í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <div id="payment-page" class="max-w-3xl mx-auto hidden">
        <div class="bg-white rounded-[3.5rem] shadow-2xl overflow-hidden border border-gray-100">
            <div class="bg-slate-900 text-white p-12 text-center">
                <h2 class="text-3xl font-black mb-2 tracking-tight">ê²°ì œ ë° ê³„ì • ì •ë³´ ì…ë ¥</h2>
                <p class="text-slate-400 text-sm italic">ë¬´í†µì¥ ì…ê¸ˆ í›„ ìƒì„¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì‹œë©´ ë©”ì¼ì´ ìë™ ë°œì†¡ë©ë‹ˆë‹¤.</p>
            </div>

            <div class="p-8 md:p-12">
                <div class="bg-blue-50 rounded-[2rem] p-8 mb-8 border border-blue-100">
                    <h3 class="text-blue-600 font-bold mb-4 flex items-center text-xs uppercase tracking-wider">ğŸ¦ ë¬´í†µì¥ ì…ê¸ˆ ì •ë³´</h3>
                    <div class="grid grid-cols-2 gap-y-3 text-sm border-t border-blue-100 pt-5">
                        <span class="text-gray-500">ì…ê¸ˆ ì€í–‰</span><span class="font-bold text-slate-800 text-right">í† ìŠ¤ë±…í¬ (Toss Bank)</span>
                        <span class="text-gray-500">ê³„ì¢Œ ë²ˆí˜¸</span><span class="font-black text-2xl text-blue-600 text-right tracking-tighter">1001-3085-3057</span>
                        <span class="text-gray-500">ì˜ˆê¸ˆì£¼</span><span class="font-bold text-slate-800 text-right">ë°•ì§„ìˆ˜</span>
                    </div>
                </div>

                <div class="bg-white rounded-[1.5rem] p-6 border border-gray-100 mb-8 shadow-sm">
                    <h3 class="font-black text-slate-800 text-sm mb-4 flex items-center">ğŸ“§ ì£¼ë¬¸ ë‚´ì—­ ìˆ˜ì‹  ì´ë©”ì¼</h3>
                    <div class="relative">
                        <label class="text-[10px] text-gray-400 absolute left-4 top-2 uppercase tracking-tighter">Email Address</label>
                        <input type="email" id="user_email" placeholder="ë‚´ì—­ì„ ìˆ˜ì‹ í•  ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" 
                               class="w-full pt-6 pb-2 px-4 border border-gray-100 rounded-xl outline-none text-sm font-bold bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                    </div>
                </div>

                <div class="mb-10">
                    <h3 class="font-black text-slate-800 text-lg mb-6 flex items-center">ğŸ‘¤ ì„œë¹„ìŠ¤ ì´ìš© ê³„ì • ì•„ì´ë”” ì…ë ¥</h3>
                    <div id="dynamic-fields" class="space-y-6"></div>
                </div>

                <div class="bg-slate-50 rounded-[2rem] p-8 border border-slate-200">
                    <h3 class="text-slate-400 font-bold text-[10px] uppercase mb-5 tracking-widest">Order Detail Summary</h3>
                    <div id="summary-list" class="space-y-3 mb-6"></div>
                    <div class="flex justify-between items-center pt-6 border-t border-slate-200">
                        <span class="font-bold text-slate-800 text-xl">ìµœì¢… ê²°ì œ ê¸ˆì•¡</span>
                        <span class="text-4xl font-black text-blue-600" id="final_total_display">0ì›</span>
                    </div>
                </div>

                <div class="mt-12 space-y-4 text-center">
                    <button id="submit-btn" onclick="finishOrder()" class="w-full bg-slate-900 hover:bg-black text-white py-7 rounded-[2rem] font-black text-2xl shadow-xl transition-all active:scale-95">ì£¼ë¬¸ì™„ë£Œ</button>
                    <button onclick="goBack()" class="text-slate-400 font-bold text-sm underline mt-4">ìˆ˜ëŸ‰ ìˆ˜ì •í•˜ëŸ¬ ê°€ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const PRICES = { BASIC: 20000, PREMIUM: 30000, SDG: 20000, ALLINONE: 10000 };
        // ë°œê¸‰ë°›ì€ ì‹¤ì œ GAS URLì…ë‹ˆë‹¤.
        const GAS_URL = "https://script.google.com/macros/s/AKfycbzPVrUSXjEJEzZ8Ib5OZqRM7UZVCJQVA7yDspIomvOK5dNre7lFSnpQ8t9Aq4RCgglW/exec"; 

        function calculate() {
            const qB = parseInt(document.getElementById('qty_basic').value) || 0;
            const qP = parseInt(document.getElementById('qty_premium').value) || 0;
            const qS = parseInt(document.getElementById('qty_sdg').value) || 0;
            const isA = document.getElementById('check_allinone').checked;

            let total = (qB * PRICES.BASIC) + (qP * PRICES.PREMIUM) + (qS * PRICES.SDG);
            if (isA) total += PRICES.ALLINONE;

            document.getElementById('display_total').innerText = total.toLocaleString();
            return { total, qB, qP, qS, isA };
        }

        function goToPayment() {
            const data = calculate();
            if (data.total === 0) { alert("ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”."); return; }

            document.getElementById('selection-page').classList.add('hidden');
            document.getElementById('payment-page').classList.remove('hidden');
            document.getElementById('final_total_display').innerText = data.total.toLocaleString() + "ì›";

            const summary = document.getElementById('summary-list');
            const fields = document.getElementById('dynamic-fields');
            summary.innerHTML = ""; fields.innerHTML = "";

            if(data.qB > 0) { addSummary(summary, 'ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ì¼ë°˜í˜•', data.qB); addInputs(fields, 'ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ì¼ë°˜í˜•', data.qB, 'blue'); }
            if(data.qP > 0) { addSummary(summary, 'ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ê³ ê¸‰í˜•', data.qP); addInputs(fields, 'ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ê³ ê¸‰í˜•', data.qP, 'indigo'); }
            if(data.qS > 0) { addSummary(summary, 'ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨', data.qS); addInputs(fields, 'ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨', data.qS, 'purple'); }
            if(data.isA) { addSummary(summary, 'ì˜¬ì¸ì› êµ¬ë… ì„œë¹„ìŠ¤', 1); addInputs(fields, 'ì˜¬ì¸ì› êµ¬ë…', 1, 'purple'); }

            window.scrollTo(0, 0);
        }

        function addSummary(parent, name, count) {
            parent.innerHTML += `<div class="flex justify-between text-slate-600 font-medium text-sm"><span>${name}</span><span class="font-bold text-slate-900">${count}ê³„ì •</span></div>`;
        }

        function addInputs(container, label, count, color) {
            let html = `<div class="bg-gray-50 rounded-[1.5rem] p-6 border border-gray-100 mb-6 shadow-sm"><h4 class="text-[11px] font-black text-${color}-600 uppercase mb-4 tracking-widest">[ ${label} ]</h4>`;
            for(let i=1; i<=count; i++) {
                html += `<div class="relative mb-3 last:mb-0">
                    <label class="text-[10px] text-gray-400 absolute left-4 top-2">${label} ${count>1 ? '#'+i : ''} ID</label>
                    <input type="text" placeholder="ë„¤ì´ë²„ ì•„ì´ë”” ì…ë ¥" class="id-input w-full pt-6 pb-2 px-4 border border-gray-100 rounded-xl outline-none text-sm font-bold bg-white focus:ring-2 focus:ring-${color}-500 transition-all" data-svc="${label}" data-idx="${i}">
                </div>`;
            }
            container.innerHTML += html + "</div>";
        }

        async function finishOrder() {
            const userEmail = document.getElementById('user_email').value;
            if(!userEmail || !userEmail.includes('@')) { 
                alert("ì •í™•í•œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); 
                return; 
            }

            const inputs = document.querySelectorAll('.id-input');
            let idsFormatted = ""; 
            
            for(let input of inputs) {
                if(!input.value) { alert("ëª¨ë“  ì„œë¹„ìŠ¤ ê³„ì •ì˜ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
                const serviceLabel = input.dataset.svc;
                const indexLabel = input.dataset.idx > 1 ? ` #${input.dataset.idx}` : "";
                // ì¤„ë°”ê¿ˆê³¼ ë¶ˆë › ê¸°í˜¸ ì ìš©
                idsFormatted += `â€¢ ${serviceLabel}${indexLabel}: ${input.value}\n`;
            }

            const data = calculate();
            const btn = document.getElementById('submit-btn');
            btn.innerText = "ì „ì†¡ ì¤‘..."; btn.disabled = true;

            const payload = {
                user_email: userEmail,
                total_price: data.total.toLocaleString() + "ì›",
                details: `ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ì¼ë°˜í˜•(${data.qB}), ì‡¼í•‘ì»¤ë„¥íŠ¸ ì „ìš© ê³ ê¸‰í˜•(${data.qP}), ìœ ë£Œ ìŠ¤ëŒ“ê³µì²´ í”„ë¡œê·¸ë¨(${data.qS}), ì˜¬ì¸ì›(${data.isA?'O':'X'})`,
                account_list: idsFormatted 
            };

            try {
                await fetch(GAS_URL, {
                    method: "POST",
                    mode: "no-cors", 
                    body: JSON.stringify(payload)
                });
                alert("ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì…ë ¥í•˜ì‹  ì´ë©”ì¼ê³¼ ê´€ë¦¬ìì—ê²Œ ë‚´ì—­ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
                location.reload();
            } catch (e) {
                alert("ë°ì´í„° ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                btn.innerText = "ì£¼ë¬¸ì™„ë£Œ"; btn.disabled = false;
            }
        }

        function goBack() { document.getElementById('selection-page').classList.remove('hidden'); document.getElementById('payment-page').classList.add('hidden'); }
        calculate();
    </script>
</body>
</html>
