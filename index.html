<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±„ìš°ë¯¸ ë¸”ë¡œê·¸ ì»¬ë ‰ì…˜ ì„œë¹„ìŠ¤ ì‹ ì²­ í•˜ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // ì—¬ê¸°ì— ë³¸ì¸ì˜ Public Keyë¥¼ ì…ë ¥í•˜ì„¸ìš”
            emailjs.init("YOUR_PUBLIC_KEY"); 
        })();
    </script>
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #f1f5f9; }
        .hidden { display: none; }
        .program-card { font-size: 0.7rem; padding: 4px 8px; border-radius: 6px; background: #ffffff; border: 1px solid #e2e8f0; color: #64748b; text-align: center; }
        select { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 1em; }
    </style>
</head>
<body class="py-12 px-4">

    <div id="selection-page" class="max-w-7xl mx-auto">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-black text-gray-900 mb-3 uppercase tracking-tight">ğŸ’ ì±„ìš°ë¯¸ ë¸”ë¡œê·¸ ì»¬ë ‰ì…˜ ì„œë¹„ìŠ¤ ì‹ ì²­ í•˜ê¸°</h1>
            <p class="text-gray-500 text-lg">ì‚¬ìš©í•  ê³„ì • ìˆ˜ëŸ‰ì— ë§ì¶° ì˜µì…˜ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
        </header>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            <div class="bg-white rounded-3xl shadow-sm p-6 border border-gray-200 flex flex-col">
                <div class="mb-5">
                    <span class="text-[10px] font-black text-blue-500 bg-blue-50 px-2 py-1 rounded-md">Standard</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ì¼ë°˜í˜•</h2>
                    <p class="text-xl font-bold text-gray-900 mt-1">20,000ì› <span class="text-xs text-gray-400">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-3 mb-8 flex-grow border-t pt-4">
                    <li>âœ… ì›ê³  ìë™ ìƒì„± / ì„ì‹œì €ì¥</li>
                    <li>âœ… ë¸”ë¡œê·¸ ì¦‰ì‹œ ë°œí–‰</li>
                    <li class="font-bold text-red-500">âŒ ìœ ë£Œ ìŠ¤ëŒ“ê³µ ë¶ˆí¬í•¨</li>
                </ul>
                <div class="mt-auto bg-slate-50 p-4 rounded-2xl border border-slate-100">
                    <select id="qty_basic" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-slate-200 rounded-xl p-2.5 outline-none cursor-pointer">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}">${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-xl p-6 border-2 border-blue-500 flex flex-col relative transform lg:scale-105 z-10">
                <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full text-[11px] font-black">ì¶”ì²œìƒí’ˆ</div>
                <div class="mb-5">
                    <span class="text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-1 rounded-md">Premium</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ê³ ê¸‰í˜•</h2>
                    <p class="text-xl font-bold text-gray-900 mt-1">30,000ì› <span class="text-xs text-gray-400">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-3 mb-8 flex-grow border-t pt-4">
                    <li class="font-bold text-blue-600">â­ ì¼ë°˜í˜• ëª¨ë“  ê¸°ëŠ¥ í¬í•¨</li>
                    <li class="font-bold text-indigo-600">âœ… ìœ ë£Œ ìŠ¤ëŒ“ê³µ í”„ë¡œê·¸ë¨ í¬í•¨</li>
                </ul>
                <div class="mt-auto bg-blue-50 p-4 rounded-2xl border border-blue-100">
                    <select id="qty_premium" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-blue-200 rounded-xl p-2.5 outline-none cursor-pointer">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}" ${i===1?'selected':''}>${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-sm p-6 border border-gray-200 flex flex-col">
                <div class="mb-5">
                    <span class="text-[10px] font-black text-indigo-500 bg-indigo-50 px-2 py-1 rounded-md">Post Booster</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ìœ ë£Œ ìŠ¤ëŒ“ê³µ</h2>
                    <p class="text-xl font-bold text-gray-900 mt-1">20,000ì› <span class="text-xs text-gray-400">/ ì›”Â·ê³„ì •</span></p>
                </div>
                <ul class="text-[13px] text-gray-600 space-y-3 mb-8 flex-grow border-t pt-4">
                    <li class="text-[11px] text-indigo-500 font-bold bg-indigo-50 p-2 rounded mb-2 text-center">30ë¶„ ë‚´ ìŠ¤ëŒ“ê³µ/ì²´ë¥˜ ì§€ì›</li>
                    <li>ğŸš€ ë°œí–‰ ìë™ ê°ì§€</li>
                    <li>ğŸ’¬ ê³ í€„ë¦¬í‹° ëŒ“ê¸€ & ê³µê°</li>
                </ul>
                <div class="mt-auto bg-indigo-50 p-4 rounded-2xl border border-indigo-100">
                    <select id="qty_sdg" onchange="calculate()" class="w-full text-center text-lg font-bold bg-white border border-indigo-200 rounded-xl p-2.5 outline-none cursor-pointer">
                        <option value="0">ì„ íƒ ì•ˆí•¨</option>
                        <script>for(let i=1; i<=10; i++) document.write(`<option value="${i}">${i}ê³„ì •</option>`);</script>
                    </select>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-sm p-6 border border-gray-200 flex flex-col">
                <div class="mb-4">
                    <span class="text-[10px] font-black text-purple-500 bg-purple-50 px-2 py-1 rounded-md">Utility Pack</span>
                    <h2 class="text-xl font-bold text-gray-800 mt-2">ì˜¬ì¸ì› ì›” êµ¬ë…</h2>
                    <p class="text-xl font-bold text-purple-600 mt-1">10,000ì›</p>
                </div>
                <div class="grid grid-cols-2 gap-1.5 mb-6 border-t pt-4">
                    <div class="program-card">ì‹œë‹ˆì–´ê³µê°</div><div class="program-card">ë§›ì§‘ìƒì„±</div>
                    <div class="program-card">í‚¤ì›Œë“œ</div><div class="program-card">ì´ì¼€ì•„</div>
                    <div class="program-card">ìŠ¤í¬ì¸ </div><div class="program-card">ì—°ì˜ˆë‰´ìŠ¤</div>
                </div>
                <div class="mt-auto bg-purple-50 p-4 rounded-xl flex items-center justify-between border border-purple-100">
                    <span class="text-xs font-bold text-purple-700">ë‹¨ë… êµ¬ë…í•˜ê¸°</span>
                    <input type="checkbox" id="check_allinone" onchange="calculate()" class="w-5 h-5 rounded text-purple-600 cursor-pointer">
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto bg-slate-900 rounded-[2.5rem] p-10 shadow-2xl text-white">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div>
                    <p class="text-slate-400 text-sm font-medium mb-1 tracking-wider">FINAL TOTAL</p>
                    <div class="flex items-baseline">
                        <span class="text-6xl font-black text-white" id="display_total">30,000</span><span class="text-2xl font-bold ml-2 text-slate-300">ì›</span>
                    </div>
                </div>
                <button onclick="goToPayment()" class="w-full md:w-auto bg-blue-500 hover:bg-blue-600 text-white py-5 px-16 rounded-2xl font-black text-xl transition-all shadow-xl">êµ¬ë§¤ ì‹ ì²­í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <div id="payment-page" class="max-w-3xl mx-auto hidden">
        <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-gray-100">
            <div class="bg-slate-900 text-white p-10 text-center">
                <h2 class="text-2xl font-black mb-2">ê²°ì œ ë° ê³„ì • ì •ë³´ ì…ë ¥</h2>
                <p class="text-slate-400 text-sm italic">ë¬´í†µì¥ ì…ê¸ˆ í›„ ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ê³  ì£¼ë¬¸ì™„ë£Œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
            </div>

            <div class="p-8">
                <div class="bg-blue-50 rounded-3xl p-6 mb-8 border border-blue-100">
                    <h3 class="text-blue-600 font-bold mb-3 text-sm">ğŸ¦ ë¬´í†µì¥ ì…ê¸ˆ ì•ˆë‚´</h3>
                    <div class="grid grid-cols-2 gap-y-2 text-sm">
                        <span class="text-gray-500">ì…ê¸ˆ ì€í–‰</span><span class="font-bold text-slate-800 text-right">í† ìŠ¤ë±…í¬</span>
                        <span class="text-gray-500">ê³„ì¢Œ ë²ˆí˜¸</span><span class="font-black text-blue-600 text-right">1001-3085-3057</span>
                        <span class="text-gray-500">ì˜ˆê¸ˆì£¼</span><span class="font-bold text-slate-800 text-right">ë°•ì§„ìˆ˜</span>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="font-bold text-slate-800 mb-4 flex items-center">ğŸ‘¤ ê³„ì • ì•„ì´ë”” ì…ë ¥</h3>
                    <div id="dynamic-fields" class="space-y-4"></div>
                </div>

                <div class="bg-slate-50 rounded-3xl p-6 border border-slate-200">
                    <h3 class="text-slate-500 font-bold text-xs uppercase mb-4 tracking-widest">Order Summary</h3>
                    <div id="purchase-summary-list" class="space-y-3 mb-6"></div>
                    <div class="flex justify-between items-center pt-4 border-t border-slate-200">
                        <span class="font-bold text-slate-800">ìµœì¢… ê²°ì œ ê¸ˆì•¡</span>
                        <span class="text-3xl font-black text-blue-600" id="final_price_display">0ì›</span>
                    </div>
                </div>

                <div class="mt-8 space-y-4">
                    <button id="finish-btn" onclick="finishOrder()" class="w-full bg-slate-900 hover:bg-black text-white py-6 rounded-3xl font-black text-2xl transition-all shadow-xl active:scale-95">ì£¼ë¬¸ì™„ë£Œ</button>
                    <button onclick="goBack()" class="w-full text-slate-400 font-bold text-sm underline text-center block">ìˆ˜ëŸ‰ ìˆ˜ì •í•˜ëŸ¬ ê°€ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const PRICES = { BASIC: 20000, PREMIUM: 30000, SDG: 20000, ALLINONE: 10000 };

        function calculate() {
            const qB = parseInt(document.getElementById('qty_basic').value);
            const qP = parseInt(document.getElementById('qty_premium').value);
            const qS = parseInt(document.getElementById('qty_sdg').value);
            const isA = document.getElementById('check_allinone').checked;

            let total = (qB * PRICES.BASIC) + (qP * PRICES.PREMIUM) + (qS * PRICES.SDG);
            if (isA) total += PRICES.ALLINONE;

            document.getElementById('display_total').innerText = total.toLocaleString();
            return { total, qB, qP, qS, isA };
        }

        function goToPayment() {
            const data = calculate();
            if (data.total === 0) { alert("ì„ íƒëœ ì„œë¹„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤."); return; }

            document.getElementById('selection-page').classList.add('hidden');
            document.getElementById('payment-page').classList.remove('hidden');
            document.getElementById('final_price_display').innerText = data.total.toLocaleString() + "ì›";

            // ìš”ì•½ í‘œì‹œ
            const summaryList = document.getElementById('purchase-summary-list');
            summaryList.innerHTML = "";
            if(data.qB > 0) appendSummary(summaryList, 'ì¼ë°˜í˜•', data.qB);
            if(data.qP > 0) appendSummary(summaryList, 'ê³ ê¸‰í˜•', data.qP);
            if(data.qS > 0) appendSummary(summaryList, 'ìœ ë£Œ ìŠ¤ëŒ“ê³µ', data.qS);
            if(data.isA) appendSummary(summaryList, 'ì˜¬ì¸ì› íŒ¨í‚¤ì§€', 1);

            // ì…ë ¥ í•„ë“œ
            const fields = document.getElementById('dynamic-fields');
            fields.innerHTML = "";
            addFields(fields, 'ì¼ë°˜í˜•', data.qB, 'blue');
            addFields(fields, 'ê³ ê¸‰í˜•', data.qP, 'indigo');
            addFields(fields, 'ìœ ë£Œ ìŠ¤ëŒ“ê³µ', data.qS, 'purple');
            window.scrollTo(0, 0);
        }

        function appendSummary(parent, name, count) {
            parent.innerHTML += `<div class="flex justify-between text-sm text-slate-600"><span>${name}</span><span class="font-bold">${count}ê³„ì •</span></div>`;
        }

        function addFields(container, label, count, color) {
            if (count > 0) {
                let html = `<div class="p-4 bg-gray-50 rounded-2xl border border-gray-100 mb-4"><h4 class="text-[10px] font-black text-${color}-600 uppercase mb-2">[ ${label} ]</h4>`;
                for (let i = 1; i <= count; i++) {
                    html += `<div class="relative mb-2">
                        <label class="text-[9px] text-gray-400 absolute left-4 top-2">${label} #${i} ì•„ì´ë””</label>
                        <input type="text" placeholder="ë„¤ì´ë²„ ì•„ì´ë””" class="service-id-input w-full pt-6 pb-2 px-4 border border-gray-200 rounded-xl outline-none text-sm font-bold" data-service="${label}" data-index="${i}">
                    </div>`;
                }
                html += `</div>`;
                container.innerHTML += html;
            }
        }

        async function finishOrder() {
            const inputs = document.querySelectorAll('.service-id-input');
            let idList = "";
            for(let input of inputs) {
                if(!input.value) { alert("ëª¨ë“  ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
                idList += `${input.dataset.service} #${input.dataset.index}: ${input.value}\n`;
            }

            const data = calculate();
            const btn = document.getElementById('finish-btn');
            btn.innerText = "ì „ì†¡ ì¤‘...";
            btn.disabled = true;

            // ì´ë©”ì¼ì— ì „ì†¡í•  ë°ì´í„° êµ¬ì„±
            const emailParams = {
                admin_email: "woodpano@gmail.com",
                total_price: data.total.toLocaleString() + "ì›",
                order_summary: `ì¼ë°˜í˜•(${data.qB}), ê³ ê¸‰í˜•(${data.qP}), ìŠ¤ëŒ“ê³µ(${data.qS}), ì˜¬ì¸ì›(${data.isA?'O':'X'})`,
                user_ids: idList
            };

            try {
                // EmailJS ì „ì†¡ (ServiceID, TemplateID í•„ìš”)
                await emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", emailParams);
                alert("ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê´€ë¦¬ìì—ê²Œ êµ¬ë§¤ ë‚´ì—­ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
                location.reload();
            } catch (error) {
                console.error("Email Error:", error);
                alert("ì´ë©”ì¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (EmailJS ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”)");
                btn.innerText = "ì£¼ë¬¸ì™„ë£Œ";
                btn.disabled = false;
            }
        }

        function goBack() {
            document.getElementById('selection-page').classList.remove('hidden');
            document.getElementById('payment-page').classList.add('hidden');
        }
        calculate();
    </script>
</body>
</html>
